# hiera.yaml - configuration for hiera lookup for puppet
---
# Format for hiera files
# Uses encrypted YAML from https://github.com/TomPoulton/hiera-eyaml
:backends:
  - yaml
  - eyaml

# Where to find regular hiera data
:yaml:
  :datadir: "/etc/puppetlabs/code/environments/production/hieradata"

# Where to find encrypted hiera data
:eyaml:
  :extension: 'eyaml'
  :datadir: "/etc/puppetlabs/code/environments/production/hieradata"
  # Keys for encryption/decryption. Private key should not be checked in.
  :pkcs7_private_key: /etc/puppetlabs/secure/eyaml/keys/private_key.pkcs7.pem
  :pkcs7_public_key:  /etc/puppetlabs/secure/eyaml/keys/public_key.pkcs7.pem

# How to find hiera data
# Try the file named after the machine under nodes or the common file
:hierarchy:
  - "nodes/%{::trusted.certname}"
  - common
