# common.yaml - hiera definitions to be applied to all nodes
---
# What classses to install
classes:
  - apticron
  - essential
  - etckeeper
  - letsencrypt
  - ntpd
  - postfix
  - sshd
  - ssh_public
  - sudo

# Username for primary user
user: rupert

# Email for primary user
email: rupert@rupert-lane.org

# Essential packages to install
essential::packages:
  - curl
  - emacs-nox
  - git
  - make
  - openssl
  - screen

# NTP servers
ntpd::servers:
  - 0.debian.pool.ntp.org
  - 1.debian.pool.ntp.org
  - 2.debian.pool.ntp.org
  - 3.debian.pool.ntp.org

# By default, nodes are satellites that relay mail to a central host
postfix::server_type: satellite

# User to send aliases email to
postfix::primary_user: "%{hiera('user')}"

# Rewrite from address for emails from satellites
postfix::rewrite_from: "%{hiera('email')}"

# Where to route email for satellites
postfix::relayhost: udon.rupert-lane.org

# SASL user and password for relaying (encrypted)
postfix::relayuser: >
    ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEw
    DQYJKoZIhvcNAQEBBQAEggEAYiUT6e/+LEsIJxJreQix3cK/IRD7MkPI6JVj
    5DmicQkcjNly2ddkPKPXW4YQV6ZYln/PlrVy79tDg5zqMdzYM+uXyXFM6GU8
    OhzvC1xWVT+jg3MLbGmLzDYvHCyaBC8M4ko7iLFJ+25NtCbHYamBnv4baReI
    nAPkI9rCQAP6DoCb2vazzL42Ls7Fa34J/k5zXQp7vlrIX9V6p1yzSIHtLh3K
    u+4jO4oQu49nOye+djtGovdS2xoTmmlHw7PPuLFWXCq7byUXnvF9bfigJyFp
    9JgWqhFzACMmJyIBRvJSHatXi0E8O4tvXebId8CLPdg85c737u0C58IgWCCF
    xQHzoTA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBazyadRvLN5QnPdt8K
    /Tq1gBAzPo+LKdEKL+61um+e9nxM]
postfix::relaypassword: >
    ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEw
    DQYJKoZIhvcNAQEBBQAEggEAMGtErrGN1Kch2LesLppLukud4Ni5sxoKKJB3
    QkERLLFlz/XA7XdUO3zkM9XGENOnxEIlbQzsaLuxTAAlVa6bqWpTegKTA7pK
    QCyPGdtDC81hnIHw5V9qtRRvin3gKPQGqexYQafj+9wqpeKKC1krsQ67p59u
    UmVPUWYugbZCbyQB93uTFDZzt8KEi7Ne5N2VD+jcH2WkWATZR6MuASDEdEEG
    Zkt66BZDRtRqmY301f9DTFjQc0fRvHqE29GGdX6h8Ri6FbcZqKeJwdkYV3Jz
    ZROsfD4VbtNlQnWQDXQp8ekaKDyQBuHDCBmZv4TY/IlQ1nb40cbmOE02K9xo
    9wSEqDA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBAPc5bFcG0Aiisd5CBt
    fRCpgBDu6OuG5dKGOJMFdyC4hYHA]

# What user to install ssh authorized_keys for
ssh_public::user: "%{hiera('user')}"

# Hash of authorized keys to install
ssh_public::keys:
  Rupert Lane <rupert@rupert-lane.org>:
    type: ssh-rsa
    key: "AAAAB3NzaC1yc2EAAAADAQABAAABAQDhPbRyb2wq3ycZSXBmtBcjyu4LOodNII4kSDsvdHgRvk96K6W8u/T8+ewvuL8Yjezm4YPwuqWVyUOk5ngfs+SuN3vd0NVZDan9DTVDMnJZJUw5kBXzWSWLckBJWvDV5PB13nYPoQmf3r/CBXaDjmrGSnVwiXl4ljuhi3qTGAxC2oMHAGRZ3PIYaO40GpcpxA4UklZusWYHTzRtTVcmZv8hJzp5ZrpooYVoFHfjTd9iUYqUUcQSAHXkj1HfDaXJq85rYSl0po1c4n+HQQbCU8oFYxrB7Wk/vsAVYlfTOKrQ2Bu393NKiS3khITrXzdWJW9iV8laGV0dRnhRJHE4hUpD"

# User to grant sudo access to
sudo::users:
  - "%{hiera('user')}"

