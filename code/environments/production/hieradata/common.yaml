# common.yaml - hiera definitions to be applied to all nodes
---
# What classses to install
classes:
  - apticron
  - essential
  - etckeeper
  - ntpd
  - postfix
  - pup_check
  - sshd
  - ssh_public
  - sudo

# Username for primary user
user: rupert

# Email for primary user
email: rupert@rupert-lane.org

# Essential packages to install
essential::packages:
  - curl
  - emacs-nox
  - git
  - make
  - openssl
  - screen

# NTP servers
ntpd::servers:
  - 0.debian.pool.ntp.org
  - 1.debian.pool.ntp.org
  - 2.debian.pool.ntp.org
  - 3.debian.pool.ntp.org

# By default, nodes are satellites that relay mail to a central host
postfix::server_type: satellite

# User to send aliases email to
postfix::primary_user: "%{hiera('user')}"

# Rewrite from address for emails from satellites
postfix::primary_domain: "rupert-lane.org"

# Where to route email for satellites
postfix::relayhost: udon.rupert-lane.org

# SASL user and password for relaying
# These should be provided in the encrypted YAML file
# postfix::relayuser:
# postfix::relaypassword:

# What user to install ssh authorized_keys for
ssh_public::user: "%{hiera('user')}"

# Hash of authorized keys to install
ssh_public::keys:
  Rupert Lane <rupert@rupert-lane.org>:
    type: ssh-rsa
    key: "AAAAB3NzaC1yc2EAAAADAQABAAABAQDhPbRyb2wq3ycZSXBmtBcjyu4LOodNII4kSDsvdHgRvk96K6W8u/T8+ewvuL8Yjezm4YPwuqWVyUOk5ngfs+SuN3vd0NVZDan9DTVDMnJZJUw5kBXzWSWLckBJWvDV5PB13nYPoQmf3r/CBXaDjmrGSnVwiXl4ljuhi3qTGAxC2oMHAGRZ3PIYaO40GpcpxA4UklZusWYHTzRtTVcmZv8hJzp5ZrpooYVoFHfjTd9iUYqUUcQSAHXkj1HfDaXJq85rYSl0po1c4n+HQQbCU8oFYxrB7Wk/vsAVYlfTOKrQ2Bu393NKiS3khITrXzdWJW9iV8laGV0dRnhRJHE4hUpD"

# User to grant sudo access to
sudo::users:
  - "%{hiera('user')}"

