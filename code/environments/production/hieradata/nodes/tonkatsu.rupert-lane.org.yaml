# tonkatsu.rupert-lane.org.yaml - hiera definitions for node tonkatsu
---
# What classses to install
classes:
  - backups
  - dovecot
  - opendkim
  - pflogsumm
  - postgres
  - spamassassin

# We are a postfix mailhost
postfix::server_type: mailhost

# Use Lets Encrypt TLS cert/key from website
postfix::tls_cert_file: /opt/letsencrypt/certs/www.rupert-lane.org/fullchain.pem
postfix::tls_key_file: /opt/letsencrypt/certs/www.rupert-lane.org/privkey.pem
dovecot::tls_cert_file: "%{hiera('postfix::tls_cert_file')}"
dovecot::tls_key_file: "%{hiera('postfix::tls_key_file')}"

# Domains to sign emails for
opendkim::primary_domain: "%{hiera('postfix::primary_domain')}"
opendkim::secondary_domains: "%{alias('postfix::secondary_domains')}"

# Where to save backups
backups::dir: /srv/backups
backups::backup_host: mezzelune.rupert-lane.org
backups::file_backups:
  - name: tonkatsu-opt
    from: /opt
    full_day: 15
    hour: 05
    minute: 02
  - name: tonkatsu-srv
    from: /srv
    full_day: 16
    hour: 05
    minute: 17
  - name: tonkatsu-home
    from: /home
    full_day: 17
    hour: 05
    minute: 32
